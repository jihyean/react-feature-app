import { get } from 'svelte/store';
export class DragDropManager {
    handlerMap = {};
    constructor(rowStore) {
        this.register('row', event => {
            let elements = document.elementsFromPoint(event.clientX, event.clientY);
            let rowElement = elements.find(element => !!element.getAttribute('data-row-id'));
            if (rowElement !== undefined) {
                const rowId = rowElement.getAttribute('data-row-id');
                const { entities } = get(rowStore);
                const targetRow = entities[rowId];
                if (targetRow.model.enableDragging) {
                    return targetRow;
                }
            }
            return null;
        });
    }
    register(target, handler) {
        this.handlerMap[target] = handler;
    }
    getTarget(target, event) {
        var handler = this.handlerMap[target];
        if (handler) {
            return handler(event);
        }
    }
}
